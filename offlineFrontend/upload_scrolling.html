<!DOCTYPE html>
<html>
  <head>
    <title>Upload Data Workflow</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content=" Upload Data using Twitter Bootstrap Wizard Plugin">
	<meta name="author" content=" Sarthak Ghosh. Template by Vincent Gabriel">
    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="generalCSS/specialStyles.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-select.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet">    
    <script src="generalJS/dataCategory.js"></script>
    <script src="generalJS/uploadFormHandle.js"></script>
	<style type="text/css">
	      body {
	        padding-top: 60px;
	        padding-bottom: 40px;
	      }
	      .sidebar-nav {
	        padding: 9px 0;
	      }
	    </style>

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
	      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->
  </head>
  <body>
  	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  		<div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">WCA Data Manager</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Upload New Data</a></li>
            <li><a href="download.html">Download Data</a></li>
            <li><a href="#dbStructure">Modify DB Structure</a></li>
            <li><a href="geographic_calculation.html">Modify Geographic Calculations</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
  	</nav>
  	<div class="container">
	    <div class="row-fluid">
	  		<div class="span1">			
	              <h1>Upload New Data</h1>
	              </br>
                  <form action="/upload_data" method="post" enctype="multipart/form-data" id="js-data-form" name="dataFileForm">
					<div class="panel panel-default panel-success">
			    		<div class="panel-heading">
			    			<h3 class="panel-title">Select file to upload</h3>
			    		</div>
			    		<div class="panel-body">						    			
		    				
								<div class="form-inline">
  									<div class="form-group">
  								        <input class="form-control" type="file" name="data-file" id="js-upload-dataFile">
  									</div>
  									<!-- <button type="submit" class="btn btn-sm btn-primary" id="js-upload-submit">Upload files</button> -->
								</div>
						

							</br>          
						</div>
					</div><!--div panel-->						    	
						   
				 	<div class="panel panel-default panel-success">
				   		<div class="panel-heading">
							<h3 class="panel-title">Enter some information about the data file you are uploading</h3>
				   		</div>
						<div class="panel-body">						    		   				    			
					            <div class="form-group form-group-lg">
						        	<label for="dataCategory" class="col-lg-2 control-label"> Category of Data</label>
						           	<div class="col-lg-9">
						        	    <select id="dataCategory" class="selectpicker form-control" data-live-search="true" data-live-search-style="begins" title="Please select a category..." onchange="populateDetails()">
							        	    <option>Demographics</option>
							            	<option>Education</option>
							            	<option>Employment</option>
							            	<option>Health</option>
							            	<option>Housing</option>
							            	<option>Income</option>
							            	<option>Transportation</option>
							 	       </select>
							        </div>
					        	</div>
						   				    
							<hr>
					        
					            <div class="form-horizontal form-group form-group-lg">
					                <label for="dataDetail" class="col-lg-3 control-label">Details</label>
					                <div class="col-lg-8">
					                	<select id="dataDetail" class="selectpicker show-tick form-control" title="Choose what your data contains...">

					                	</select>
					             	</div>
					           	</div>
					        			
					            <div class="form-horizontal form-group form-group-md">
					            	<label for="dateFrom" class="col-lg-3 control-label">Date Range</label>

					            	<div class="col-md-4">
                                        <div class='input-group date' id='datetimepicker8'>
               								 <input type='text' class=" selectpicker form-control" placeholder="from" id="fromDate"/>
                							    <span class="input-group-addon">
                   									<span class="glyphicon glyphicon-calendar">
                    								</span>
                								</span>
            							</div>

					             	</div>
					             	<div class="col-lg-4">
										<div class='input-group date' id='datetimepicker9'>
                							<input type='text' class="form-control" placeholder="to" id = "toDate" onChange="onToDateChange()"/>
                							<span class="input-group-addon">
                    							<span class="glyphicon glyphicon-calendar"></span>
                							</span>
            							</div>
					             	</div>
					           	</div>
					       
							<hr>
				    	</div><!--div panel body-->
		    		</div><!--panel success-->

		    		<div class="panel panel-default panel-success">
			    		<div class="panel-heading">
		    				<h3 class="panel-title"> Choose a calculations file</h3>
			    		</div>    								   	
			    		<div class="panel-body">		    		
		    				
			    				<h4> Select from the existing calculations files</h4>					    			
		    					<div class="row">
		    						<div class="col-lg-4">
		    							<div class="radio">
		    							  <label><input type="radio" name="optradio1">Option 1</label>
		    							</div>
		    							<div class="radio">
		    								<label><input type="radio" name="optradio2">Option 2</label>
		    							</div>
		    							<div class="radio disabled">
		    								<label><input type="radio" name="optradio3" disabled>Option 3</label>
		    							</div>
		    						</div>

									<div class="col-lg-4">
		    							<div class="radio">
		    								<label><input type="radio" name="optradio1">Option 1</label>
		    							</div>
		    							<div class="radio">
		    								<label><input type="radio" name="optradio2">Option 2</label>
		    							</div>
		    							<div class="radio disabled">
		    								<label><input type="radio" name="optradio3" disabled>Option 3</label>
		    							</div>
		    						</div>
		    					
		    						<div class="col-lg-12">
		    							<h3> OR </h3>
		    					    	<h4> Upload a new file</h4>
		    							<div class="form-inline">
											<div class="form-group">
							     				<input class="form-control" type="file" name="calc-file" id="js-upload-calcFile">
											</div>
<!-- 											<button type="submit" class="btn btn-sm btn-primary" id="js-upload-submit">Upload file</button> -->
										</div>
							    	</div> 
								</div><!-- <div class="row">-->
						
		    		    </div>
		    		</div><!--panel-->
		    		
					<button type="button" class="btn btn-success btn-lg" style="float:right" onclick="validateAndSubmit()">Upload</button>
					<button type="button" class="btn btn-warning btn-lg" style="float:right; margin-right:1em;">Cancel</button>
				</form>

					<div id="response-message"></div>
		    	</div>

		    </div>
		</div>
	</div>
</div>

						  	        
						    
							<!-- <div class="tab-pane" id="tab3">
								<div class="panel panel-default panel-success">
						    		<div class="panel-heading">
						    			<h3 class="panel-title"> Choose a calculations file</h3>
						    		</div>
						    	
						    		<div class="panel-body"> -->
<!-- 						    		    //read how many calculations files are already there and then display them in radio buttons. --> 						    			

<!-- 						    			<form action="" method="post" enctype="multipart/form-data" id="js-upload-form">
						    				<h4> Select from the existing calculations files</h4> -->							    			
							    			<!-- <div class="row">
							    				<div class="col-lg-4">
													<div class="radio">
													  <label><input type="radio" name="optradio1">Option 1</label>
													</div>
													<div class="radio">
													  <label><input type="radio" name="optradio2">Option 2</label>
													</div>
													<div class="radio disabled">
													  <label><input type="radio" name="optradio3" disabled>Option 3</label>
													</div>
												</div>

												<div class="col-lg-4">
													<div class="radio">
													  <label><input type="radio" name="optradio1">Option 1</label>
													</div>
													<div class="radio">
													  <label><input type="radio" name="optradio2">Option 2</label>
													</div>
													<div class="radio disabled">
													  <label><input type="radio" name="optradio3" disabled>Option 3</label>
													</div>
												</div>

											</div> -->
											<!-- <div class="row">
							    				<div class="col-lg-12">
													<h3> OR </h3>
													<h4> Upload a new file</h4>
													<div class="form-inline">
              											<div class="form-group">
              								     			<input class="form-control" type="file" name="files[]" id="js-upload-files">
              											</div>
              												<button type="submit" class="btn btn-sm btn-primary" id="js-upload-submit">Upload file</button>
            										</div>
            									</div>
            								</div> -->
											
<!-- 										</form> -->
						    		<!-- </div>
						    	</div>

						    </div> -->
							<!-- <div class="tab-pane" id="tab4">
								<div class="panel panel-default panel-success">
						    		<div class="panel-heading">
						    			<h3 class="panel-title">File successfully Processed</h3>
						    		</div>
						    
						    		<div class="panel-body">
						    			<h4> Press the button below to download the processed CSV file suitable for Tableau </h4>
						    			<button class="btn btn-success">download file</button>
						    			
						    		</div>
						    	</div>

						    </div><!--div tab 4-->
<!-- 							<ul class="pager wizard">
								<li class="previous first" style="display:none;"><a href="javascript:;">First</a></li>
								<li class="previous"><a href="javascript:;">Previous</a></li>
								<li class="next last" style="display:none;"><a href="javascript:;">Last</a></li>
							  	<li class="next" id="nextButton"><a href="javascript:;">Next</a></li>
							</ul> -->
<!-- 						</div>
					</div>
					</div>
	            </div>
	        </div>

          </div><!--/row--> -->

    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/bootstrap-select.js"></script>
    <script src="bootstrap/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript">
    $('.selectpicker').selectpicker({
      });
    </script>
    


    <script src="generalJS/dragAndDrop.js"></script>
    <script src="generalJS/dataCategory.js"></script>
	<script src="jquery.bootstrap.wizard.js"></script>

<script type="text/javascript">
    	var startDate;
    	var endDate;
    $('.selectpicker').selectpicker({
      });

    function validateAndSubmit() {
    	console.log("validateAndSubmit is being called");
    	if(endDate<startDate)
    		alert("to-year must be more than from-year");
    	else{
		$("form").submit();
		}
	}



    $(function () {

        $('#datetimepicker8').datetimepicker({
			format: "yyyy",
		    startView: 'decade',
		    minView:'1960',
		    maxView:'2016',
            viewSelect: 'decade',		    
            startDate: '1960',        
            endDate: '2016',
		    autoclose: true,
		    pickerPosition: "bottom-left",
            
        });

        $('#datetimepicker9').datetimepicker({
            format: "yyyy",
		    startView: 'decade',
       	 	minView: '1960',
        	startDate: '1960',
        	maxView: '2016',
        	endDate: '2016',
		    autoclose: true,
		    pickerPosition: "bottom-left"
        });

$('#datetimepicker8').datetimepicker()
.on('changeDate', function(ev){
	console.log("start date is : ");
	console.log(ev.date.valueOf());
	startDate=ev.date.valueOf();
	updateTo();
    // if (ev.date.valueOf() < date-start-display.valueOf()){
    //     ....
    // }
});
$('#datetimepicker9').datetimepicker()
.on('changeDate', function(ev){
	
	console.log("start date is : ");
	endDate=ev.date.valueOf();
	if (endDate<startDate) {
		alert("to-year must be more than from-year");
				 
	}
});


    });



    function updateTo()
    { var picked = $('#datetimepicker8').data('date')
      $('#datetimepicker9').datetimepicker('setStartDate', picked)
    }

    </script>


  </body>
